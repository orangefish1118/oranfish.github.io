{"title":"Redis入门","uid":"9d6afd20d8190b4b550aed150e5e2779","slug":"Redis入门","date":"2024-04-04T13:25:12.000Z","updated":"2024-05-06T04:31:53.866Z","comments":true,"path":"api/articles/Redis入门.json","keywords":"博客、橙汁蒸鱼、Orangefish、Oranfish","cover":"/medias/23.jpg","content":"<h2 id=\"1-初始Redis\"><a href=\"#1-初始Redis\" class=\"headerlink\" title=\"1.初始Redis\"></a>1.初始Redis</h2><p>Redis是一种键值型的NoSql数据库，这里有两个关键字：</p>\n<ul>\n<li><p>键值型</p>\n</li>\n<li><p>NoSql</p>\n</li>\n</ul>\n<p>其中<strong>键值型</strong>，是指Redis中存储的数据都是以key、value对的形式存储，而value的形式多种多样，可以是字符串、数值、甚至json：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/6U1Rhxo.png\" alt=\"image-20220502190959608\"></p>\n<p>而NoSql则是相对于传统关系型数据库而言，有很大差异的一种数据库。</p>\n<h3 id=\"1-1-认识NoSQL\"><a href=\"#1-1-认识NoSQL\" class=\"headerlink\" title=\"1.1 认识NoSQL\"></a>1.1 认识NoSQL</h3><p><strong>NoSql</strong>可以翻译做Not Only Sql（不仅仅是SQL），或者是No Sql（非Sql的）数据库。是相对于传统关系型数据库而言，有很大差异的一种特殊的数据库，因此也称之为<strong>非关系型数据库</strong>。</p>\n<h4 id=\"1-1-1-结构化和非结构化\"><a href=\"#1-1-1-结构化和非结构化\" class=\"headerlink\" title=\"1.1.1 结构化和非结构化\"></a>1.1.1 结构化和非结构化</h4><p>传统关系型数据库是结构化数据，每一张表都有严格的约束信息：字段名、字段数据类型、字段约束等等信息，插入的数据必须遵守这些约束。</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/4tUgFo6-17122364582671.png\"></p>\n<p>而NoSql则对数据库格式没有严格约束，往往形式松散，自由。</p>\n<p>可以是键值型：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/GdqOSsj.png\"></p>\n<p>也可以是文档型：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/zBBQfcc.png\"></p>\n<p>甚至可以是图格式：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/zBnKxWf.png\"></p>\n<h4 id=\"1-1-2-关联和非关联\"><a href=\"#1-1-2-关联和非关联\" class=\"headerlink\" title=\"1.1.2 关联和非关联\"></a>1.1.2 关联和非关联</h4><p>传统数据库的表与表之间往往存在关联，例如外键。</p>\n<p>而非关系型数据库不存在关联关系，要维护关系要么靠代码中的业务逻辑，要么靠数据之间的耦合：</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">张三</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  orders</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">       id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">       item</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> title</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">荣耀6</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> price</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4999</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">       </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">       id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">       item</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> title</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">小米11</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> price</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3999</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">       </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"1-1-3-查询方式\"><a href=\"#1-1-3-查询方式\" class=\"headerlink\" title=\"1.1.3 查询方式\"></a>1.1.3 查询方式</h4><p>传统关系型数据库会基于Sql语句做查询，语法有统一标准；</p>\n<p>而不同的非关系数据库查询语法差异极大，五花八门各种各样。</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/AzaHOTF.png\"></p>\n<h4 id=\"1-1-4-事务\"><a href=\"#1-1-4-事务\" class=\"headerlink\" title=\"1.1.4 事务\"></a>1.1.4 事务</h4><p>传统关系型数据库能满足事务ACID的原则。</p>\n<p>而非关系型数据库往往不支持事务，或者不能严格保证ACID的特性，只能实现基本的一致性。</p>\n<h4 id=\"1-1-5-总结\"><a href=\"#1-1-5-总结\" class=\"headerlink\" title=\"1.1.5 总结\"></a>1.1.5 总结</h4><p>除了上述四点以外，在存储方式、扩展性、查询性能上关系型与非关系型也都有着显著差异，总结如下：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/kZP40dQ.png\"></p>\n<ul>\n<li>存储方式<ul>\n<li>关系型数据库基于磁盘进行存储，会有大量的磁盘IO，对性能有一定影响</li>\n<li>非关系型数据库，他们的操作更多的是依赖于内存来操作，内存的读写速度会非常快，性能自然会好一些</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>扩展性<ul>\n<li>关系型数据库集群模式一般是主从，主从数据一致，起到数据备份的作用，称为垂直扩展。</li>\n<li>非关系型数据库可以将数据拆分，存储在不同机器上，可以保存海量数据，解决内存大小有限的问题。称为水平扩展。</li>\n<li>关系型数据库因为表之间存在关联关系，如果做水平扩展会给数据查询带来很多麻烦</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-2-认识Redis\"><a href=\"#1-2-认识Redis\" class=\"headerlink\" title=\"1.2 认识Redis\"></a>1.2 认识Redis</h3><p>Redis诞生于2009年全称是<strong>Re</strong>mote  <strong>D</strong>ictionary <strong>S</strong>erver 远程词典服务器，是一个基于内存的键值型NoSQL数据库。</p>\n<p><strong>特征</strong>：</p>\n<ul>\n<li>键值（key-value）型，value支持多种不同数据结构，功能丰富</li>\n<li>单线程，每个命令具备原子性</li>\n<li>低延迟，速度快（基于内存、IO多路复用、良好的编码）。</li>\n<li>支持数据持久化</li>\n<li>支持主从集群、分片集群</li>\n<li>支持多语言客户端</li>\n</ul>\n<p>Redis的官方网站地址：<a href=\"https://redis.io/\">https://redis.io/</a></p>\n<h3 id=\"1-3-安装Redis\"><a href=\"#1-3-安装Redis\" class=\"headerlink\" title=\"1.3 安装Redis\"></a>1.3 安装Redis</h3><p>ps：可看VMware部署Redis文档学习以下内容。</p>\n<p>本安装教程基于Linux系统来安装Redis，此处选择的Linux版本为CentOS 7。</p>\n<h4 id=\"1-3-1-依赖库\"><a href=\"#1-3-1-依赖库\" class=\"headerlink\" title=\"1.3.1 依赖库\"></a>1.3.1 依赖库</h4><p>Redis是基于C语言编写的，因此首先需要安装Redis所需要的gcc依赖：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">yum</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">install</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-y</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">gcc</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">tcl</span></span></code></pre></div><h4 id=\"1-3-2-上传安装包并解压\"><a href=\"#1-3-2-上传安装包并解压\" class=\"headerlink\" title=\"1.3.2 上传安装包并解压\"></a>1.3.2 上传安装包并解压</h4><p>ps：此处需学习使用Xftp进行虚拟机上传Redis安装包</p>\n<p>然后将课前资料提供的Redis安装包上传到虚拟机的任意目录：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/SyjanS5-17122372233342.png\"></p>\n<p>例如，我放到了&#x2F;usr&#x2F;local&#x2F;src 目录：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/01DTNCf-17122372233344.png\"></p>\n<p>解压缩：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">tar</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-xzf</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis-6.2.6.tar.gz</span></span></code></pre></div><p>解压后：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/8V6zvCD-17122372233343.png\" alt=\"image-20211211080339076\"></p>\n<p>进入redis目录：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">cd</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis-6.2.6</span></span></code></pre></div><p>运行编译命令：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">make</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">make</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">install</span></span></code></pre></div><p>如果没有出错，应该就安装成功了。</p>\n<p>默认的安装路径是在 <code>/usr/local/bin</code>目录下</p>\n<p>该目录已经默认配置到环境变量，因此可以在任意目录下运行这些命令。其中：</p>\n<ul>\n<li>redis-cli：是redis提供的命令行客户端</li>\n<li>redis-server：是redis的服务端启动脚本</li>\n<li>redis-sentinel：是redis的哨兵启动脚本</li>\n</ul>\n<h4 id=\"1-3-3-启动\"><a href=\"#1-3-3-启动\" class=\"headerlink\" title=\"1.3.3 启动\"></a>1.3.3 启动</h4><p>redis的启动方式有很多种，例如：</p>\n<ul>\n<li>默认启动</li>\n<li>指定配置启动</li>\n<li>开机自启</li>\n</ul>\n<h4 id=\"1-3-4-默认启动\"><a href=\"#1-3-4-默认启动\" class=\"headerlink\" title=\"1.3.4 默认启动\"></a>1.3.4 默认启动</h4><p>安装完成后，在任意目录输入redis-server命令即可启动Redis：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">redis-server</span></span></code></pre></div><p>如图：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/v7xWsqC.png\"></p>\n<p>这种启动属于<code>前台启动</code>，会阻塞整个会话窗口，窗口关闭或者按下<code>CTRL + C</code>则Redis停止。不推荐使用。</p>\n<h4 id=\"1-3-5-指定配置启动\"><a href=\"#1-3-5-指定配置启动\" class=\"headerlink\" title=\"1.3.5 指定配置启动\"></a>1.3.5 指定配置启动</h4><p>如果要让Redis以<code>后台</code>方式启动，则必须修改Redis配置文件，就在我们之前解压的redis安装包下（<code>/usr/local/src/redis-6.2.6</code>），名字叫redis.conf：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/image-20211211082225509.png\" alt=\"image-20211211082225509\"></p>\n<p>我们先将这个配置文件备份一份：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">cp redis.conf redis.conf.bckas</span></span></code></pre></div><p>然后修改redis.conf文件中的一些配置：</p>\n<div class=\"language-properties\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">properties</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问，生产环境不要设置为0.0.0.0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">bind 0.0.0.0</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 守护进程，修改为yes后即可后台运行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">daemonize yes </span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 密码，设置后访问Redis必须输入密码</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">requirepass 123321</span></span></code></pre></div><p>Redis的其它常见配置：</p>\n<div class=\"language-properties\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">properties</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 监听的端口</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">port 6379</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">dir .</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">databases 1</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 设置redis能够使用的最大内存</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">maxmemory 512mb</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">logfile </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">redis.log</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><p>启动Redis：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 进入redis安装目录 </span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">cd</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/usr/local/src/redis-6.2.6</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 启动</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">redis-server</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis.conf</span></span></code></pre></div><p>停止服务：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 利用redis-cli来执行 shutdown 命令，即可停止 Redis 服务，</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 因为之前配置了密码，因此需要通过 -u 来指定密码</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">redis-cli</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-u</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">123321</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">shutdown</span></span></code></pre></div><h4 id=\"1-3-6-开机自启\"><a href=\"#1-3-6-开机自启\" class=\"headerlink\" title=\"1.3.6 开机自启\"></a>1.3.6 开机自启</h4><p>我们也可以通过配置来实现开机自启。</p>\n<p>首先，新建一个系统服务文件：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">vi</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/etc/systemd/system/redis.service</span></span></code></pre></div><p>内容如下：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">[Unit]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">Description=redis-server</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">After=network.target</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">[Service]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">Type=forking</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">ExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">PrivateTmp=true</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">[Install]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">WantedBy=multi-user.target</span></span></code></pre></div><p>然后重载系统服务：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">daemon-reload</span></span></code></pre></div><p>现在，我们可以用下面这组命令来操作redis了：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 启动</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">start</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 停止</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">stop</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 重启</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">restart</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 查看状态</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">status</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis</span></span></code></pre></div><p>执行下面的命令，可以让redis开机自启：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">enable</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">redis</span></span></code></pre></div><h3 id=\"1-4-Redis桌面客户端\"><a href=\"#1-4-Redis桌面客户端\" class=\"headerlink\" title=\"1.4 Redis桌面客户端\"></a>1.4 Redis桌面客户端</h3><p>安装完成Redis，我们就可以操作Redis，实现数据的CRUD了。这需要用到Redis客户端，包括：</p>\n<ul>\n<li>命令行客户端</li>\n<li>图形化桌面客户端</li>\n<li>编程客户端</li>\n</ul>\n<h4 id=\"1-4-1-Redis命令行客户端\"><a href=\"#1-4-1-Redis命令行客户端\" class=\"headerlink\" title=\"1.4.1 Redis命令行客户端\"></a>1.4.1 Redis命令行客户端</h4><p>Redis安装完成后就自带了命令行客户端：redis-cli，使用方式如下：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">redis-cli</span><span style=\"color: #BABED8\"> [options] </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">commonds</span><span style=\"color: #89DDFF\">]</span></span></code></pre></div><p>其中常见的options有：</p>\n<ul>\n<li><code>-h 127.0.0.1</code>：指定要连接的redis节点的IP地址，默认是127.0.0.1</li>\n<li><code>-p 6379</code>：指定要连接的redis节点的端口，默认是6379</li>\n<li><code>-a 123321</code>：指定redis的访问密码</li>\n</ul>\n<p>其中的commonds就是Redis的操作命令，例如：</p>\n<ul>\n<li><code>ping</code>：与redis服务端做心跳测试，服务端正常会返回<code>pong</code></li>\n</ul>\n<p>不指定commond时，会进入<code>redis-cli</code>的交互控制台：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/OYYWPNo.png\"></p>\n<h4 id=\"1-4-2-图形化桌面客户端\"><a href=\"#1-4-2-图形化桌面客户端\" class=\"headerlink\" title=\"1.4.2 图形化桌面客户端\"></a>1.4.2 图形化桌面客户端</h4><p>GitHub上的大神编写了Redis的图形化桌面客户端，地址：<a href=\"https://github.com/uglide/RedisDesktopManager\">https://github.com/uglide/RedisDesktopManager</a></p>\n<p>不过该仓库提供的是RedisDesktopManager的源码，并未提供windows安装包。</p>\n<p>在下面这个仓库可以找到安装包：<a href=\"https://github.com/lework/RedisDesktopManager-Windows/releases\">https://github.com/lework/RedisDesktopManager-Windows/releases</a></p>\n<p>请灵活搜索。</p>\n<h4 id=\"1-4-3-安装\"><a href=\"#1-4-3-安装\" class=\"headerlink\" title=\"1.4.3 安装\"></a>1.4.3 安装</h4><p>解压缩后，运行安装程序即可安装：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/hguGHbX.png\"></p>\n<p>安装完成后，在安装目录下找到rdm.exe文件：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/hwK5LQ8.png\"></p>\n<p>双击即可运行：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/6hUqslY.png\"></p>\n<h4 id=\"1-4-4-建立连接\"><a href=\"#1-4-4-建立连接\" class=\"headerlink\" title=\"1.4.4 建立连接\"></a>1.4.4 建立连接</h4><p>点击左上角的<code>连接到Redis服务器</code>按钮：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/9qTGyoN.png\"></p>\n<p>在弹出的窗口中填写Redis服务信息：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/DshNnKC.png\"></p>\n<p>点击确定后，在左侧菜单会出现这个链接：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/A2cOm7Q.png\"></p>\n<p>点击即可建立连接了。</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/ja8Fd9s.png\"></p>\n<p>Redis默认有16个仓库，编号从0至15.  通过配置文件可以设置仓库数量，但是不超过16，并且不能自定义仓库名称。</p>\n<p>如果是基于redis-cli连接Redis服务，可以通过select命令来选择数据库：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 选择 0号库</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">select</span><span style=\"color: #BABED8\"> 0</span></span></code></pre></div><h2 id=\"2-Redis常见命令\"><a href=\"#2-Redis常见命令\" class=\"headerlink\" title=\"2.Redis常见命令\"></a>2.Redis常见命令</h2><p>Redis是典型的key-value数据库，key一般是字符串，而value包含很多不同的数据类型：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/8tli2o9.png\"></p>\n<p>Redis为了方便我们学习，将操作不同数据类型的命令也做了分组，在官网（ <a href=\"https://redis.io/commands\">https://redis.io/commands </a>）可以查看到不同的命令。</p>\n<p>不同类型的命令称为一个group，我们也可以通过help命令来查看各种不同group的命令：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/suevOIR.png\"></p>\n<h3 id=\"2-1-Redis通用命令\"><a href=\"#2-1-Redis通用命令\" class=\"headerlink\" title=\"2.1 Redis通用命令\"></a>2.1 Redis通用命令</h3><p>通用指令是部分数据类型的，都可以使用的指令，常见的有：</p>\n<ul>\n<li>KEYS：查看符合模板的所有key</li>\n<li>DEL：删除一个指定的key</li>\n<li>EXISTS：判断key是否存在</li>\n<li>EXPIRE：给一个key设置有效期，有效期到期时该key会被自动删除</li>\n<li>TTL：查看一个KEY的剩余有效期</li>\n</ul>\n<p>通过help [command] 可以查看一个命令的具体用法，例如：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 查看keys命令的帮助信息：</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">127.0.0.1:6379&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">help</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">keys</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">KEYS</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">pattern</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">summary:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">Find</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">all</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">keys</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">matching</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">the</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">given</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">pattern</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">since:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.0</span><span style=\"color: #C3E88D\">.0</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">group:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">generic</span></span></code></pre></div><h3 id=\"2-2-String类型\"><a href=\"#2-2-String类型\" class=\"headerlink\" title=\"2.2 String类型\"></a>2.2 String类型</h3><p>String类型，也就是字符串类型，是Redis中最简单的存储类型。</p>\n<p>其value是字符串，不过根据字符串的格式不同，又可以分为3类：</p>\n<ul>\n<li>string：普通字符串</li>\n<li>int：整数类型，可以做自增、自减操作</li>\n<li>float：浮点类型，可以做自增、自减操作</li>\n</ul>\n<p>不管是哪种格式，底层都是字节数组形式存储，只不过是编码方式不同。字符串类型的最大空间不能超过512m.</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/VZqpv73.png\"></p>\n<h4 id=\"2-2-1-String的常见命令\"><a href=\"#2-2-1-String的常见命令\" class=\"headerlink\" title=\"2.2.1 String的常见命令\"></a>2.2.1 String的常见命令</h4><p>String的常见命令有：</p>\n<ul>\n<li>SET：添加或者修改已经存在的一个String类型的键值对</li>\n<li>GET：根据key获取String类型的value</li>\n<li>MSET：批量添加多个String类型的键值对</li>\n<li>MGET：根据多个key获取多个String类型的value</li>\n<li>INCR：让一个整型的key自增1</li>\n<li>INCRBY:让一个整型的key自增并指定步长，例如：incrby num 2 让num值自增2</li>\n<li>INCRBYFLOAT：让一个浮点类型的数字自增并指定步长</li>\n<li>SETNX：添加一个String类型的键值对，前提是这个key不存在，否则不执行</li>\n<li>SETEX：添加一个String类型的键值对，并且指定有效期</li>\n</ul>\n<h4 id=\"2-2-2-Key结构\"><a href=\"#2-2-2-Key结构\" class=\"headerlink\" title=\"2.2.2 Key结构\"></a>2.2.2 Key结构</h4><p>Redis没有类似MySQL中的Table的概念，我们该如何区分不同类型的key呢？</p>\n<p>我们可以通过给key添加前缀加以区分，不过这个前缀不是随便加的，有一定的规范：</p>\n<p>Redis的key允许有多个单词形成层级结构，多个单词之间用’:’隔开，格式如下：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">    项目名:业务名:类型:id</span></span></code></pre></div><p>这个格式并非固定，也可以根据自己的需求来删除或添加词条。这样以来，我们就可以把不同类型的数据区分开了。从而避免了key的冲突问题。</p>\n<p>例如我们的项目名称叫 heima，有user和product两种不同类型的数据，我们可以这样定义key：</p>\n<ul>\n<li><p>user相关的key：<strong>heima:user:1</strong></p>\n</li>\n<li><p>product相关的key：<strong>heima:product:1</strong></p>\n</li>\n</ul>\n<p>如果Value是一个Java对象，例如一个User对象，则可以将对象序列化为JSON字符串后存储：</p>\n<table>\n<thead>\n<tr>\n<th><strong>KEY</strong></th>\n<th><strong>VALUE</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>heima:user:1</td>\n<td>{“id”:1,  “name”: “Jack”, “age”: 21}</td>\n</tr>\n<tr>\n<td>heima:product:1</td>\n<td>{“id”:1,  “name”: “小米11”, “price”: 4999}</td>\n</tr>\n</tbody></table>\n<p>并且，在Redis的桌面客户端中，还会以相同前缀作为层级结构，让数据看起来层次分明，关系清晰：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/InWMfeD.png\"></p>\n<h3 id=\"2-3-Hash类型\"><a href=\"#2-3-Hash类型\" class=\"headerlink\" title=\"2.3 Hash类型\"></a>2.3 Hash类型</h3><p>Hash类型，也叫散列，其value是一个无序字典，类似于Java中的HashMap结构。</p>\n<p>String结构是将对象序列化为JSON字符串后存储，当需要修改对象某个字段时很不方便：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/x2zDBjf.png\"></p>\n<p>Hash结构可以将对象中的每个字段独立存储，可以针对单个字段做CRUD：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/VF2EPt0.png\"></p>\n<p>Hash的常见命令有：</p>\n<ul>\n<li><p>HSET key field value：添加或者修改hash类型key的field的值</p>\n</li>\n<li><p>HGET key field：获取一个hash类型key的field的值</p>\n</li>\n<li><p>HMSET：批量添加多个hash类型key的field的值</p>\n</li>\n<li><p>HMGET：批量获取多个hash类型key的field的值</p>\n</li>\n<li><p>HGETALL：获取一个hash类型的key中的所有的field和value</p>\n</li>\n<li><p>HKEYS：获取一个hash类型的key中的所有的field</p>\n</li>\n<li><p>HINCRBY:让一个hash类型key的字段值自增并指定步长</p>\n</li>\n<li><p>HSETNX：添加一个hash类型的key的field值，前提是这个field不存在，否则不执行</p>\n</li>\n</ul>\n<h3 id=\"2-4-List类型\"><a href=\"#2-4-List类型\" class=\"headerlink\" title=\"2.4 List类型\"></a>2.4 List类型</h3><p>Redis中的List类型与Java中的LinkedList类似，可以看做是一个双向链表结构。既可以支持正向检索和也可以支持反向检索。</p>\n<p>特征也与LinkedList类似：</p>\n<ul>\n<li>有序</li>\n<li>元素可以重复</li>\n<li>插入和删除快</li>\n<li>查询速度一般</li>\n</ul>\n<p>常用来存储一个有序数据，例如：朋友圈点赞列表，评论列表等。</p>\n<p>List的常见命令有：</p>\n<ul>\n<li>LPUSH key element … ：向列表左侧插入一个或多个元素</li>\n<li>LPOP key：移除并返回列表左侧的第一个元素，没有则返回nil</li>\n<li>RPUSH key element … ：向列表右侧插入一个或多个元素</li>\n<li>RPOP key：移除并返回列表右侧的第一个元素</li>\n<li>LRANGE key star end：返回一段角标范围内的所有元素</li>\n<li>BLPOP和BRPOP：与LPOP和RPOP类似，只不过在没有元素时等待指定时间，而不是直接返回nil</li>\n</ul>\n<h3 id=\"2-5-Set类型\"><a href=\"#2-5-Set类型\" class=\"headerlink\" title=\"2.5 Set类型\"></a>2.5 Set类型</h3><p>Redis的Set结构与Java中的HashSet类似，可以看做是一个value为null的HashMap。因为也是一个hash表，因此具备与HashSet类似的特征：</p>\n<ul>\n<li><p>无序</p>\n</li>\n<li><p>元素不可重复</p>\n</li>\n<li><p>查找快</p>\n</li>\n<li><p>支持交集、并集、差集等功能</p>\n</li>\n</ul>\n<p>Set的常见命令有：</p>\n<ul>\n<li>SADD key member … ：向set中添加一个或多个元素</li>\n<li>SREM key member … : 移除set中的指定元素</li>\n<li>SCARD key： 返回set中元素的个数</li>\n<li>SISMEMBER key member：判断一个元素是否存在于set中</li>\n<li>SMEMBERS：获取set中的所有元素</li>\n<li>SINTER key1 key2 … ：求key1与key2的交集</li>\n<li>SDIFF key1 key2 … ：求key1与key2的不同</li>\n</ul>\n<h3 id=\"2-6-SortedSet类型\"><a href=\"#2-6-SortedSet类型\" class=\"headerlink\" title=\"2.6 SortedSet类型\"></a>2.6 SortedSet类型</h3><p>Redis的SortedSet是一个可排序的set集合，与Java中的TreeSet有些类似，但底层数据结构却差别很大。SortedSet中的每一个元素都带有一个score属性，可以基于score属性对元素排序，底层的实现是一个跳表（SkipList）加 hash表。</p>\n<p>SortedSet具备下列特性：</p>\n<ul>\n<li>可排序</li>\n<li>元素不重复</li>\n<li>查询速度快</li>\n</ul>\n<p>因为SortedSet的可排序特性，经常被用来实现排行榜这样的功能。</p>\n<p>SortedSet的常见命令有：</p>\n<ul>\n<li>ZADD key score member：添加一个或多个元素到sorted set ，如果已经存在则更新其score值</li>\n<li>ZREM key member：删除sorted set中的一个指定元素</li>\n<li>ZSCORE key member : 获取sorted set中的指定元素的score值</li>\n<li>ZRANK key member：获取sorted set 中的指定元素的排名</li>\n<li>ZCARD key：获取sorted set中的元素个数</li>\n<li>ZCOUNT key min max：统计score值在给定范围内的所有元素的个数</li>\n<li>ZINCRBY key increment member：让sorted set中的指定元素自增，步长为指定的increment值</li>\n<li>ZRANGE key min max：按照score排序后，获取指定排名范围内的元素</li>\n<li>ZRANGEBYSCORE key min max：按照score排序后，获取指定score范围内的元素</li>\n<li>ZDIFF、ZINTER、ZUNION：求差集、交集、并集</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>注意：所有的排名默认都是升序，如果要降序则在命令的Z后面添加REV即可，例如：</p>\n<ul>\n<li><p><strong>升序</strong>获取sorted set 中的指定元素的排名：ZRANK key member</p>\n</li>\n<li><p><strong>降序</strong>获取sorted set 中的指定元素的排名：ZREVRANK key memeber</p>\n</li>\n</ul></blockquote>\n<h2 id=\"3-Redis的Java客户端\"><a href=\"#3-Redis的Java客户端\" class=\"headerlink\" title=\"3.Redis的Java客户端\"></a>3.Redis的Java客户端</h2><p>在Redis官网中提供了各种语言的客户端，地址：<a href=\"https://redis.io/docs/clients/\">https://redis.io/docs/clients/</a></p>\n<p>标记为*的就是推荐使用的java客户端，包括：</p>\n<ul>\n<li>Jedis和Lettuce：这两个主要是提供了Redis命令对应的API，方便我们操作Redis，而SpringDataRedis又对这两种做了抽象和封装，因此我们后期会直接以SpringDataRedis来学习。</li>\n<li>Redisson：是在Redis基础上实现了分布式的可伸缩的java数据结构，例如Map、Queue等，而且支持跨进程的同步机制：Lock、Semaphore等待，比较适合用来实现特殊的功能需求。</li>\n</ul>\n<h3 id=\"3-1-Jedis客户端\"><a href=\"#3-1-Jedis客户端\" class=\"headerlink\" title=\"3.1 Jedis客户端\"></a>3.1 Jedis客户端</h3><p>Jedis的官网地址： <a href=\"https://github.com/redis/jedis\">https://github.com/redis/jedis</a></p>\n<h4 id=\"3-1-1-快速入门\"><a href=\"#3-1-1-快速入门\" class=\"headerlink\" title=\"3.1.1 快速入门\"></a>3.1.1 快速入门</h4><p>1）引入依赖：</p>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">&lt;!--jedis--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">redis.clients</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">jedis</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">3.7.0</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">&lt;!--单元测试--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.junit.jupiter</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">junit-jupiter</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">5.7.0</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">scope</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">test</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">scope</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p>2）建立连接</p>\n<p>新建一个单元测试类，内容如下：</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Jedis</span><span style=\"color: #BABED8\"> jedis</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">BeforeEach</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">setUp</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 1.建立连接</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// jedis = new Jedis(&quot;192.168.150.101&quot;, 6379);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jedis </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JedisConnectionFactory</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getJedis</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 2.设置密码</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">auth</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">123321</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 3.选择库</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">select</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>3）测试：</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Test</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testString</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 存入数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> result </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">虎哥</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">result = </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> result</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 获取数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name = </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Test</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testHash</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 插入hash数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">hset</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Jack</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">hset</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">21</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 获取</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Map</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> map </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">hgetAll</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">map</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>4）释放资源</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">AfterEach</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">tearDown</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">jedis </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"3-1-2-连接池\"><a href=\"#3-1-2-连接池\" class=\"headerlink\" title=\"3.1.2 连接池\"></a>3.1.2 连接池</h4><p>Jedis本身是线程不安全的，并且频繁的创建和销毁连接会有性能损耗，因此我们推荐大家使用Jedis连接池代替Jedis的直连方式。</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">heima</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">util</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">redis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">clients</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">jedis</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">*</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">JedisConnectionFactory</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">JedisPool</span><span style=\"color: #BABED8\"> jedisPool</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 配置连接池</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">JedisPoolConfig</span><span style=\"color: #BABED8\"> poolConfig </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">JedisPoolConfig</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        poolConfig</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setMaxTotal</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        poolConfig</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setMaxIdle</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        poolConfig</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setMinIdle</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        poolConfig</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setMaxWaitMillis</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 创建连接池对象，参数：连接池配置、服务端ip、服务端端口、超时时间、密码</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        jedisPool </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">JedisPool</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">poolConfig</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">192.168.150.101</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6379</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">123321</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Jedis</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getJedis</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> jedisPool</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getResource</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"3-2-SpringDataRedis客户端\"><a href=\"#3-2-SpringDataRedis客户端\" class=\"headerlink\" title=\"3.2 SpringDataRedis客户端\"></a>3.2 SpringDataRedis客户端</h3><p>SpringData是Spring中数据操作的模块，包含对各种数据库的集成，其中对Redis的集成模块就叫做SpringDataRedis，官网地址：<a href=\"https://spring.io/projects/spring-data-redis\">https://spring.io/projects/spring-data-redis</a></p>\n<ul>\n<li>提供了对不同Redis客户端的整合（Lettuce和Jedis）</li>\n<li>提供了RedisTemplate统一API来操作Redis</li>\n<li>支持Redis的发布订阅模型</li>\n<li>支持Redis哨兵和Redis集群</li>\n<li>支持基于Lettuce的响应式编程</li>\n<li>支持基于JDK、JSON、字符串、Spring对象的数据序列化及反序列化</li>\n<li>支持基于Redis的JDKCollection实现</li>\n</ul>\n<p>SpringDataRedis中提供了RedisTemplate工具类，其中封装了各种对Redis的操作。并且将不同数据类型的操作API封装到了不同的类型中：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/UFlNIV0.png\"></p>\n<h4 id=\"3-2-1-快速入门\"><a href=\"#3-2-1-快速入门\" class=\"headerlink\" title=\"3.2.1 快速入门\"></a>3.2.1 快速入门</h4><p>SpringBoot已经提供了对SpringDataRedis的支持，使用非常简单。</p>\n<p>首先，新建一个maven项目，然后按照下面步骤执行：</p>\n<p>1）引入依赖</p>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;?</span><span style=\"color: #F07178\">xml</span><span style=\"color: #C792EA\"> version</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">1.0</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\"> encoding</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">UTF-8</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">?&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">project</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">xmlns</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">http://maven.apache.org/POM/4.0.0</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">xmlns</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">xsi</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">http://www.w3.org/2001/XMLSchema-instance</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">         </span><span style=\"color: #C792EA\">xsi</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">schemaLocation</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">modelVersion</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">4.0.0</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">modelVersion</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">parent</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.springframework.boot</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">spring-boot-starter-parent</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">2.5.7</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">relativePath</span><span style=\"color: #89DDFF\">/&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">&lt;!-- lookup parent from repository --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">parent</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">com.heima</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">redis-demo</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">0.0.1-SNAPSHOT</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">version</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">redis-demo</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">description</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">Demo project for Spring Boot</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">description</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">properties</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">java.version</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">1.8</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">java.version</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">properties</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependencies</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">&lt;!--redis依赖--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.springframework.boot</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">spring-boot-starter-data-redis</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">&lt;!--common-pool--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.apache.commons</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">commons-pool2</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">&lt;!--Jackson依赖--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">com.fasterxml.jackson.core</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">jackson-databind</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.projectlombok</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">lombok</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">optional</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">true</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">optional</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.springframework.boot</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">spring-boot-starter-test</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">scope</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">test</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">scope</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependency</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">dependencies</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">build</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">plugins</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">plugin</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.springframework.boot</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">spring-boot-maven-plugin</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">excludes</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">exclude</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.projectlombok</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">groupId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                            </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">lombok</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">artifactId</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">exclude</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">excludes</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">plugin</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">plugins</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">build</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">project</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p>2）配置Redis</p>\n<div class=\"language-yaml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yaml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F07178\">spring</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">redis</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">host</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">192.168.150.101</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">port</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6379</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">password</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">123321</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">lettuce</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #F07178\">pool</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #F07178\">max-active</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #F07178\">max-idle</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #F07178\">min-idle</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #F07178\">max-wait</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">100ms</span></span></code></pre></div><p>3）注入RedisTemplate</p>\n<p>因为有了SpringBoot的自动装配，我们可以拿来就用：</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">SpringBootTest</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">RedisStringTests</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Autowired</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">RedisTemplate</span><span style=\"color: #BABED8\"> redisTemplate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>4）编写测试</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">SpringBootTest</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">RedisStringTests</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Autowired</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">RedisTemplate</span><span style=\"color: #BABED8\"> edisTemplate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Test</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testString</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 写入一条String数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        redisTemplate</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">opsForValue</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">虎哥</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 获取string数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> stringRedisTemplate</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">opsForValue</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name = </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"3-2-2-自定义序列化\"><a href=\"#3-2-2-自定义序列化\" class=\"headerlink\" title=\"3.2.2 自定义序列化\"></a>3.2.2 自定义序列化</h4><p>RedisTemplate可以接收任意Object作为值写入Redis：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/OEMcbuu.png\"></p>\n<p>只不过写入前会把Object序列化为字节形式，默认是采用JDK序列化，得到的结果是这样的：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/5FjtWk5.png\"></p>\n<p>缺点：</p>\n<ul>\n<li>可读性差</li>\n<li>内存占用较大</li>\n</ul>\n<p>我们可以自定义RedisTemplate的序列化方式，代码如下：</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Configuration</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">RedisConfig</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Bean</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">RedisTemplate</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">redisTemplate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">RedisConnectionFactory</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">connectionFactory</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 创建RedisTemplate对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">RedisTemplate</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> template </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">RedisTemplate</span><span style=\"color: #89DDFF\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 设置连接工厂</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        template</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setConnectionFactory</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connectionFactory</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 创建JSON序列化工具</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">GenericJackson2JsonRedisSerializer</span><span style=\"color: #BABED8\"> jsonRedisSerializer </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                                        </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">GenericJackson2JsonRedisSerializer</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 设置Key的序列化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        template</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setKeySerializer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">RedisSerializer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">());</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        template</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setHashKeySerializer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">RedisSerializer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">());</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 设置Value的序列化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        template</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setValueSerializer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">jsonRedisSerializer</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        template</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setHashValueSerializer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">jsonRedisSerializer</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">// 返回</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> template</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>这里采用了JSON序列化来代替默认的JDK序列化方式。最终结果如图：</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/XOAq3cN.png\"></p>\n<p>整体可读性有了很大提升，并且能将Java对象自动的序列化为JSON字符串，并且查询时能自动把JSON反序列化为Java对象。不过，其中记录了序列化时对应的class名称，目的是为了查询时实现自动反序列化。这会带来额外的内存开销。</p>\n<h4 id=\"3-2-3-StringRedisTemplate\"><a href=\"#3-2-3-StringRedisTemplate\" class=\"headerlink\" title=\"3.2.3 StringRedisTemplate\"></a>3.2.3 StringRedisTemplate</h4><p>为了节省内存空间，我们可以不使用JSON序列化器来处理value，而是统一使用String序列化器，要求只能存储String类型的key和value。当需要存储Java对象时，手动完成对象的序列化和反序列化。</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/Ip9TKSY.png\"></p>\n<p>因为存入和读取时的序列化及反序列化都是我们自己实现的，SpringDataRedis就不会将class信息写入Redis了。</p>\n<p>这种用法比较普遍，因此SpringDataRedis就提供了RedisTemplate的子类：StringRedisTemplate，它的key和value的序列化方式默认就是String方式。</p>\n<p><img src=\"/orangefish1118.github.io/Redis%E5%85%A5%E9%97%A8/zXH6Qn6.png\"></p>\n<p>省去了我们自定义RedisTemplate的序列化方式的步骤，而是直接使用：</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Autowired</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">StringRedisTemplate</span><span style=\"color: #BABED8\"> stringRedisTemplate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// JSON序列化工具</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">final</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">ObjectMapper</span><span style=\"color: #BABED8\"> mapper </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ObjectMapper</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Test</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testSaveUser</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws JsonProcessingException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 创建对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">User</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">User</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">虎哥</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">21</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 手动序列化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> json </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> mapper</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">writeValueAsString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 写入数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    stringRedisTemplate</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">opsForValue</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:200</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> json</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 获取数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> jsonUser </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> stringRedisTemplate</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">opsForValue</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:200</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// 手动反序列化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">User</span><span style=\"color: #BABED8\"> user1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> mapper</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">readValue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">jsonUser</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> User</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">class</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user1 = </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> user1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>RedisTemplate的两种序列化实践方案：</p>\n<ul>\n<li><p>方案一：</p>\n<ul>\n<li>自定义RedisTemplate</li>\n<li>修改RedisTemplate的序列化器为GenericJackson2JsonRedisSerializer</li>\n</ul>\n</li>\n<li><p>方案二：</p>\n<ul>\n<li>使用StringRedisTemplate</li>\n<li>写入Redis时，手动把对象序列化为JSON</li>\n<li>读取Redis时，手动把读取到的JSON反序列化为对象</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"3-2-4-Hash结构操作\"><a href=\"#3-2-4-Hash结构操作\" class=\"headerlink\" title=\"3.2.4 Hash结构操作\"></a>3.2.4 Hash结构操作</h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">SpringBootTest</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">RedisStringTests</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Autowired</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">StringRedisTemplate</span><span style=\"color: #BABED8\"> stringRedisTemplate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Test</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testHash</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        stringRedisTemplate</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">opsForHash</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">put</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:400</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">虎哥</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        stringRedisTemplate</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">opsForHash</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">put</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:400</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">21</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Map</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> entries </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> stringRedisTemplate</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">opsForHash</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">entries</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user:400</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">entries = </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> entries</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div>","text":"Redis的安装使用，常见的Redis命令用法总结...","permalink":"/post/Redis入门","photos":[],"count_time":{"symbolsCount":"18k","symbolsTime":"16 mins."},"categories":[{"name":"Study","slug":"Study","count":30,"path":"api/categories/Study.json"}],"tags":[{"name":"Redis","slug":"Redis","count":2,"path":"api/tags/Redis.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E5%88%9D%E5%A7%8BRedis\"><span class=\"toc-text\">1.初始Redis</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-1-%E8%AE%A4%E8%AF%86NoSQL\"><span class=\"toc-text\">1.1 认识NoSQL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-1-%E7%BB%93%E6%9E%84%E5%8C%96%E5%92%8C%E9%9D%9E%E7%BB%93%E6%9E%84%E5%8C%96\"><span class=\"toc-text\">1.1.1 结构化和非结构化</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-2-%E5%85%B3%E8%81%94%E5%92%8C%E9%9D%9E%E5%85%B3%E8%81%94\"><span class=\"toc-text\">1.1.2 关联和非关联</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-3-%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">1.1.3 查询方式</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-4-%E4%BA%8B%E5%8A%A1\"><span class=\"toc-text\">1.1.4 事务</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-5-%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">1.1.5 总结</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-2-%E8%AE%A4%E8%AF%86Redis\"><span class=\"toc-text\">1.2 认识Redis</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-3-%E5%AE%89%E8%A3%85Redis\"><span class=\"toc-text\">1.3 安装Redis</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-1-%E4%BE%9D%E8%B5%96%E5%BA%93\"><span class=\"toc-text\">1.3.1 依赖库</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-2-%E4%B8%8A%E4%BC%A0%E5%AE%89%E8%A3%85%E5%8C%85%E5%B9%B6%E8%A7%A3%E5%8E%8B\"><span class=\"toc-text\">1.3.2 上传安装包并解压</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-3-%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">1.3.3 启动</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-4-%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">1.3.4 默认启动</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-5-%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">1.3.5 指定配置启动</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-3-6-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF\"><span class=\"toc-text\">1.3.6 开机自启</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-4-Redis%E6%A1%8C%E9%9D%A2%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">1.4 Redis桌面客户端</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-4-1-Redis%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">1.4.1 Redis命令行客户端</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-4-2-%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%A1%8C%E9%9D%A2%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">1.4.2 图形化桌面客户端</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-4-3-%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">1.4.3 安装</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-4-4-%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">1.4.4 建立连接</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-Redis%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">2.Redis常见命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-1-Redis%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">2.1 Redis通用命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-2-String%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.2 String类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-2-1-String%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">2.2.1 String的常见命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-2-2-Key%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">2.2.2 Key结构</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-3-Hash%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.3 Hash类型</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-4-List%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.4 List类型</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-5-Set%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.5 Set类型</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-6-SortedSet%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.6 SortedSet类型</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-Redis%E7%9A%84Java%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">3.Redis的Java客户端</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-1-Jedis%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">3.1 Jedis客户端</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-1-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8\"><span class=\"toc-text\">3.1.1 快速入门</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-2-%E8%BF%9E%E6%8E%A5%E6%B1%A0\"><span class=\"toc-text\">3.1.2 连接池</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-2-SpringDataRedis%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">3.2 SpringDataRedis客户端</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-1-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8\"><span class=\"toc-text\">3.2.1 快速入门</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BA%8F%E5%88%97%E5%8C%96\"><span class=\"toc-text\">3.2.2 自定义序列化</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-3-StringRedisTemplate\"><span class=\"toc-text\">3.2.3 StringRedisTemplate</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-4-Hash%E7%BB%93%E6%9E%84%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">3.2.4 Hash结构操作</span></a></li></ol></li></ol></li></ol>","author":{"name":"Fioransh","slug":"blog-author","avatar":"/medias/2.jpg","link":"/","description":"<p> 学而无知，无知而学 <p> <p> Anime is trash and so am I. <p>","socials":{"github":"https://github.com/orangefish1118","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/14481775?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/Orangefish-cyc"},"mail":{"icon":"/svg/email.svg","link":"mailto:1263938020@qq.com"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"VMware部署Redis","uid":"da5c5f9dfe8d5fb0dab3c41b63c9c534","slug":"VMware部署Redis","date":"2024-04-05T15:48:12.000Z","updated":"2024-05-06T04:32:04.318Z","comments":true,"path":"api/articles/VMware部署Redis.json","keywords":"博客、橙汁蒸鱼、Orangefish、Oranfish","cover":"/medias/22.jpg","text":"在VMware上进行Redis的基本部署...","permalink":"/post/VMware部署Redis","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"Study","slug":"Study","count":30,"path":"api/categories/Study.json"}],"tags":[{"name":"Redis","slug":"Redis","count":2,"path":"api/tags/Redis.json"},{"name":"VMware","slug":"VMware","count":1,"path":"api/tags/VMware.json"}],"author":{"name":"Fioransh","slug":"blog-author","avatar":"/medias/2.jpg","link":"/","description":"<p> 学而无知，无知而学 <p> <p> Anime is trash and so am I. <p>","socials":{"github":"https://github.com/orangefish1118","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/14481775?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/Orangefish-cyc"},"mail":{"icon":"/svg/email.svg","link":"mailto:1263938020@qq.com"}}}}},"next_post":{"title":"算竞常用STL","uid":"af7adfb1aa53297139dec65c56a65de6","slug":"算竞常用STL","date":"2024-02-14T12:01:12.000Z","updated":"2024-03-08T08:21:08.270Z","comments":true,"path":"api/articles/算竞常用STL.json","keywords":"博客、橙汁蒸鱼、Orangefish、Oranfish","cover":"/medias/20.png","text":"1 前言**C++ 标准模板库 (STL, Standard Template Library)**：包含一些常用数据结构与算法的模板的 C++ 软件库。其包含...","permalink":"/post/算竞常用STL","photos":[],"count_time":{"symbolsCount":"17k","symbolsTime":"16 mins."},"categories":[{"name":"Study","slug":"Study","count":30,"path":"api/categories/Study.json"}],"tags":[{"name":"学习","slug":"学习","count":20,"path":"api/tags/学习.json"},{"name":"算法","slug":"算法","count":2,"path":"api/tags/算法.json"}],"author":{"name":"Fioransh","slug":"blog-author","avatar":"/medias/2.jpg","link":"/","description":"<p> 学而无知，无知而学 <p> <p> Anime is trash and so am I. <p>","socials":{"github":"https://github.com/orangefish1118","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/14481775?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/Orangefish-cyc"},"mail":{"icon":"/svg/email.svg","link":"mailto:1263938020@qq.com"}}}}}}